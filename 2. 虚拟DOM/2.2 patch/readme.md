# patch

## 新增

when：DOM中不存在vnode中存在的节点

how：只有元素节点，文本节点，注释节点是需要新增的

## 删除

when：DOM中存在vnode中不存在的节点需要被删除

## 更新

when：相同节点，但是节点细节不一致

how：

- 首先判断是否一致或者是静态节点？是：退出
- 判断vnode是文本节点？是：新老节点的文本是否不同？是：将vnode中的文本替换DOM中的文本
- 判断是否都有子节点？是：新老节点中的子节点不相同？是：更新子节点
- 只有vnode有子节点？是：（老节点中是否有文本？是？清空DOM中的文本）并将vnode中的子节点加到DOM中
- 只有oldVnode有子节点？是：清空DOM中的子节点
- 老节点中有文本？是：清空文本

## 更新子节点

### 更新节点 如果同一个节点且位置相同

### 新增节点 插入到未处理节点之前

### 删除节点 删除oldChildren中未被处理的节点

### 移动节点 移动到所有未处理节点的最前面
